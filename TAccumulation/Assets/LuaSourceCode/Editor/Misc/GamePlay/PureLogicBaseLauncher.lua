---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by baozhatou.
--- DateTime: 2023/3/15 11:17
---

---@class PureLogicBaseLauncher
local PureLogicBaseLauncher = class("PureLogicBaseLauncher")
local this = PureLogicBaseLauncher

-- 子类实现
---@protected
function this:OnEnter(recordStr,...)
    -- todo
end

--region Private

---@private
function this:PreEnter(loadFromRecord)
    -- 编辑器离线模式下不锁帧
    CS.UnityEngine.Application.targetFrameRate = -1
    -- 标记为离线模式
    ServerConst.Mode = ServerConst.GameMode.Offline
    -- 默认存储id为时间戳
    ServerConst.SaveFileId = os.time()
    Debug.Log("[PureLogic] SaveFileID : " .. ServerConst.SaveFileId)
    -- 默认是不从record中加载
    ServerConst.IsNeedLoadCommand = loadFromRecord or false
    ServerConst.LoadCommandMode = loadFromRecord and ServerConst.LoadCommandType.FromFile or ServerConst.LoadCommandType.FromRecord

end

---C#层调用，进入游戏
---@private
function this:EnterGame(...)
    ----- 标记离线模式相关相关的数据
    self:PreEnter(false)
    ----- 真正进入游戏的逻辑，业务层自己实现
    self:OnEnter(nil,...)
end

---C#层调用，读取Record进入游戏
---@private
function this:EnterGameByRecord(recordStr,...)
    self:PreEnter(true)
    self:OnEnter(recordStr,...)
end

---退出游戏，实际为切换到空场景
---@private
function this:QuitGame()
    --- 离线模式退出，默认切换到空场景，做一次场景切换用来清楚数据
    GameStateMgr.Switch(GameState.Empty)
end

--endregion

return this