---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by doudou.
--- DateTime: 2023/9/1 12:07
---@class GenLocalImageMap:BaseCfgHandler
local GenLocalImageMap = class("GenLocalImageMap", BaseCfgHandler)

function GenLocalImageMap:Execute()
    local file_path = LUA_CFG_PATH .. "LocalImageNames.lua"

    local imageNames = {}
    local allFaceImage = LuaCfgMgr.GetAll("FaceCreateImg")
    if allFaceImage then
        for k, _ in pairs(allFaceImage) do
            imageNames[k] = { Name = k, BizType = "HeadIcon" }
        end
    end

    local allCard = LuaCfgMgr.GetAll("CardBaseInfo")
    for _, cfg in pairs(allCard) do
        local dynamicCfg = LuaCfgMgr.Get("CardDynamic", cfg.ID, 1)
        if dynamicCfg and dynamicCfg.IsNeedFemale == 1 then
            imageNames[cfg.CardImage] = { Name = cfg.CardImage, BizType = "DynamicCard" }
            if dynamicCfg.MiddleCardScreenshotHeight ~= 0 and dynamicCfg.MiddleCardOffset ~= nil then
                imageNames[cfg.CardMiddleImage] = { Name = cfg.CardMiddleImage, BizType = "DynamicCard" }
            end
            if dynamicCfg.SmallCardScreenshotHeight ~= 0 and dynamicCfg.SmallCardOffset ~= nil then
                imageNames[cfg.CardSmallImage] = { Name = cfg.CardSmallImage, BizType = "DynamicCard" }
            end
        end
    end

    self:WriteFile(file_path, imageNames)
end

return GenLocalImageMap