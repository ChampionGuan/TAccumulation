---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiaozhu.
--- DateTime: 2022/11/23 12:19
---
---@class GenAudioConst:BaseCfgHandler
local GenAudioConst = class("GenAudioConst",BaseCfgHandler)
local cfg = "ResourcesAudio"
local startId = 100000
local tag = "Audio_"
local outFileName = "AudioConst"

function GenAudioConst:Execute()
    local path = string.concat(LUA_CFG_PATH,"/",outFileName,".lua")
    local src_path = string.concat(LUA_CFG_PATH,"/",cfg,".lua")
    ---@type table<int,cfg.ResourcesAudio>
    local temp = {}
    local ids = {}
    for k,v in pairs(LuaCfgMgr.GetAll(cfg)) do
        temp[k] = v
        table.insert(ids,k)
    end
    table.sort(ids)
    local des = {string.concat(outFileName,"\t=\t{}\n")}
    for k,v in ipairs(ids) do
        local key = self:GetTextDes(v)
        table.insert(des,string.concat(outFileName,".",key,"\t=\t",string.format("'%s'",temp[v].AudioEventName) ,"\n"))
    end
    table.insert(des,string.concat("return\t",outFileName))
    self:Write(path,table.concat(des))
    self:Delete(src_path)
end

function GenAudioConst:GetTextDes(id)
    return string.concat(tag,id)
end
return GenAudioConst