---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiaozhu.
--- DateTime: 2023/4/25 13:14
---
---@class GenPrefabConst:BaseCfgHandler
local GenPrefabConst = class("GenPrefabConst",BaseCfgHandler)
local cfg = "ResourcesUIPrefab"
local tag = ""
local outFileName = "PrefabConst"

function GenPrefabConst:Execute()
    local path = string.concat(LUA_CFG_PATH,"/",outFileName,".lua")
    local src_path = string.concat(LUA_CFG_PATH,"/",cfg,".lua")
    ---@type table<int,cfg.ResourcesUIPrefab>
    local temp = {}
    local ids = {}
    for k,v in pairs(LuaCfgMgr.GetAll(cfg)) do
        temp[k] = v
        table.insert(ids,k)
    end
    table.sort(ids)
    local des = {string.concat(outFileName,"\t=\t{}\n")}
    for k,v in ipairs(ids) do
        local key = self:GetTextDes(v)
        table.insert(des,string.concat(outFileName,".",key,"\t=\t",string.format("'%s'",temp[v].PrefabName) ,"\n"))
    end
    table.insert(des,string.concat("return\t",outFileName))
    self:Write(path,table.concat(des))
    self:Delete(src_path)
end

function GenPrefabConst:GetTextDes(id)
    return string.concat(tag,id)
end
return GenPrefabConst