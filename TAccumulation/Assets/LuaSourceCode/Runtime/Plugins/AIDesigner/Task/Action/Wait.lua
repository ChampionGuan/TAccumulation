---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by chaoguan.
--- DateTime: 2020/11/25 19:50
---

local AIAction = require("Runtime.Plugins.AIDesigner.Base.AITask").AIAction

---等待指定时间
---IconName:WaitIcon.png
---@class SystemAI.Wait:AIAction
---@field waitTime AIVar|Float
---@field randomWait AIVar|Boolean
---@field randomWaitMin AIVar|Float
---@field randomWaitMax AIVar|Float
local Wait = AIUtil.class("Wait", AIAction)

function Wait:OnEnter()
    if self.randomWait and self.randomWait:GetValue() then
        self._waitDuration = Mathf.RandomFloat(self.randomWaitMin:GetValue(), self.randomWaitMax:GetValue())
    else
        self._waitDuration = self.waitTime:GetValue()
    end
    self._waitDuration = self._waitDuration + self.context:GetRealtime()
end

function Wait:OnUpdate()
    if self._waitDuration < self.context:GetRealtime() then
        return AITaskState.Success
    end
    return AITaskState.Running
end

return Wait