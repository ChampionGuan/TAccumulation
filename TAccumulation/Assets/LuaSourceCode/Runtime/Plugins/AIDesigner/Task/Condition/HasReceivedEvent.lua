---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/6/14 18:21
---

local AICondition = require("Runtime.Plugins.AIDesigner.Base.AITask").AICondition

---@class HasReceivedEvent:AICondition
---@field eventName string
local HasReceivedEvent = class("HasReceivedEvent", AICondition)

function HasReceivedEvent:OnEnter()
    self.hasReceivedEvent = false
    EventMgr.AddListenerOnce(self.eventName, self.OnEventReceived, self)
end

function HasReceivedEvent:OnEventReceived()
    self.hasReceivedEvent = true
end

---@return AITaskState
function HasReceivedEvent:OnUpdate()
    if self.hasReceivedEvent then
        return AITaskState.Success
    end
    return AITaskState.Running
end

function HasReceivedEvent:OnDestroy()
    EventMgr.RemoveListenerByTarget(self)
end

function HasReceivedEvent:OnExit()
    EventMgr.RemoveListenerByTarget(self)
end

return HasReceivedEvent