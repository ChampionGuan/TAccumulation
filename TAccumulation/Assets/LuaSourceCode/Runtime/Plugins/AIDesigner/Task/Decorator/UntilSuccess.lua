---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by chaoguan.
--- DateTime: 2020/11/27 17:33
---

local AIDecorator = require("Runtime.Plugins.AIDesigner.Base.AITask").AIDecorator

---如果子节点不是Success状态，重复执行子节点
---IconName:UntilSuccessIcon.png
---@class AI.UntilSuccess:AIDecorator
local UntilSuccess = AIUtil.class("UntilSuccess", AIDecorator)

---阻塞类型
UntilSuccess.blockingUpType = AIBlockingUpType.Repeater

function UntilSuccess:LeftRepetitions()
    if #self.children > 0 then
        if self.children[1].disabled then
            self._leftCount = 0
        elseif self.children[1].state ~= AITaskState.Success then
            self._leftCount = 1
        else
            self._leftCount = 0
        end
    else
        self._leftCount = 0
    end
    return self._leftCount
end

return UntilSuccess