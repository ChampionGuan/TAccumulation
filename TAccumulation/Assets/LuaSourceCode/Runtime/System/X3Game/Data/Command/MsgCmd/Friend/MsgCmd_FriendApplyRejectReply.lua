--- Generated by AutoGen
---
---@class MsgCmd_FriendApplyRejectReply
local MsgCmd_FriendApplyRejectReply = class("MsgCmd_FriendApplyRejectReply", require("Runtime.System.Framework.GameBase.Misc.SimpleCommand"))

---Command执行
---@param reply pbcmessage.FriendApplyRejectReply
function MsgCmd_FriendApplyRejectReply:Execute(reply)
    if reply then
        ---@type FriendProxy
        local proxy = SelfProxyFactory.GetFriendProxy()
        local friendApplyRejectList = reply.FriendApplyRejectList
        if friendApplyRejectList and #friendApplyRejectList > 0 then
            ---拒绝的玩家列表
            for _, uid in ipairs(friendApplyRejectList) do
                local friendInfo = proxy:RemoveFriendingByUid(uid)
                if friendInfo then
                    UICommonUtil.ShowMessage(UITextConst.UI_TEXT_30522)
                    --清理红点状态
                    BllMgr.GetFriendBLL():DelFriendingApplyRedPoint(uid)
                else
                    print("RecvMsg_FriendApplyRejectReply error, serverdata.unknown.userid:", uid)
                end
            end
            ---更新好友申请列表
            EventMgr.Dispatch("EVENT_REFRESH_FRIENDING_REFUSE")
        else
            Debug.Log("RecvMsg_FriendApplyRejectReply error, serverdata.FriendApplyRejectList = nilOrEmpty")
        end
    else
        Debug.Log("RecvMsg_FriendApplyRejectReply error, serverdata = nil")
    end
end

return MsgCmd_FriendApplyRejectReply
