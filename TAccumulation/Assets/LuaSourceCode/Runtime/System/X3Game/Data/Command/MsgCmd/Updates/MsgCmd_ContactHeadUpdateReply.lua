--- Generated by AutoGen
---
---@class MsgCmd_ContactHeadUpdateReply
local MsgCmd_ContactHeadUpdateReply = class("MsgCmd_ContactHeadUpdateReply", require("Runtime.System.Framework.GameBase.Misc.SimpleCommand"))

---Command执行
---@param reply pbcmessage.ContactHeadUpdateReply
function MsgCmd_ContactHeadUpdateReply:Execute(reply)
    ---Insert Your Code Here!

    local contact = BllMgr.GetMobileContactBLL():GetContactData(reply.ContactID)
    if contact then
        local cache = contact:GetHeadImgCache()
        if cache == nil then
            cache = X3DataMgr.Create(X3DataConst.X3Data.PhoneContactHeadImgCache)
            contact:SetHeadImgCache(cache)
        end

        cache:SetUrl(reply.HeadImgUrl)
        cache:SetState(reply.Result)
        cache:SetSetTime(GrpcMgr.GetServerTimeToUnixTimeSeconds())

        BllMgr.GetPhoneMsgBLL():GetSimulator():ReceiveHeadUpdate(reply.ContactID)
    end
end

return MsgCmd_ContactHeadUpdateReply
