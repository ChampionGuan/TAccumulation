---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by 峻峻.
--- DateTime: 2021/11/12 11:18
---

---进入日常约会
---@class DailyDateCmd_EnterDailyDate
local DailyDateCmd_EnterDailyDate = class("DailyDateCmd_EnterDailyDate", require("Runtime.System.Framework.GameBase.Misc.SimpleCommand"))

---Command执行
---@param dailyDateEntryId int
---@param dailySubId int
---@param callback fun
function DailyDateCmd_EnterDailyDate:Execute(dailyDateEntryId, subId, callback, ...)
    if GamePlayMgr.IsPlaying() then
        Debug.Log("有约会正在进行中")
        return
    end
    BllMgr.GetDailyDateBLL():SetLastSubId(dailyDateEntryId, subId)
    local dailyDateEntry = LuaCfgMgr.Get("DailyDateEntry", dailyDateEntryId)
    if dailyDateEntry then
        EventMgr.Dispatch("GamePlayCmd_EnterGame", Define.GamePlayEnterType.GamePlayEnterTypeDaily,
                dailyDateEntry.GameType, subId, callback)
    end
    BllMgr.GetDailyDateBLL():ClearNewDailyDate(dailyDateEntryId)
end

return DailyDateCmd_EnterDailyDate