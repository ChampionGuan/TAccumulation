--- Generated by AutoGen
---
---@class MsgCmd_PhotoDeleteReply
local MsgCmd_PhotoDeleteReply = class("MsgCmd_PhotoDeleteReply", require("Runtime.System.Framework.GameBase.Misc.SimpleCommand"))

---Command执行
---@param data pbcmessage.PhotoDeleteReply
function MsgCmd_PhotoDeleteReply:Execute(data)
	--Debug.LogError("MsgCmd_PhotoDeleteReply")
	--Debug.LogErrorTable(data)
	local isSendMsg = false
	for i = 1, #data.UrlList do
		SelfProxyFactory.GetPhotoProxy():RemovePhoto(data.UrlList[i])

		---云端的本地文件删除后，再删除云端。应该直接移除
		BllMgr.GetPhotoSystemBLL():CheckRemoveLocal(data.UrlList[i])

		---需要先删本地，再删云端缓存
		BllMgr.GetPhotoSystemBLL():ChangeLocalUploadState(data.UrlList[i], false)

		isSendMsg = true
	end
	if isSendMsg then
		EventMgr.Dispatch("Photo_DeleteFinish",data)
	else
		Debug.LogError("MsgCmd_PhotoDeleteReply 无效删除")
	end
end

return MsgCmd_PhotoDeleteReply
