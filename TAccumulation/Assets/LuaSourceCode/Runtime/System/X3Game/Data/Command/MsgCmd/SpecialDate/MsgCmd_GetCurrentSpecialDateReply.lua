--- Generated by AutoGen
---
---@class MsgCmd_GetCurrentSpecialDateReply
local MsgCmd_GetCurrentSpecialDateReply = class("MsgCmd_GetCurrentSpecialDateReply", require("Runtime.System.Framework.GameBase.Misc.SimpleCommand"))

---Command执行
---@param msg pbcmessage.GetCurrentSpecialDateReply
function MsgCmd_GetCurrentSpecialDateReply:Execute(msg)
    local openData = {}
    openData.specialDateEntryID = msg.CurrentId
    openData.dialogueRecordList = msg.DialogueRecordList
    local dialogueLegal = true
    if msg.DialogueRecordList ~= nil and #msg.DialogueRecordList > 0 then
        local specialDateEntry = LuaCfgMgr.Get("SpecialDateEntry", msg.CurrentId)
        local dialogueInfo = LuaCfgMgr.Get("DialogueInfo", specialDateEntry.Drama)
        dialogueLegal = DialogueUtil.CheckRecordLegal(dialogueInfo.Name, msg.DialogueRecordList)
    end
    if dialogueLegal then
        DateManager.DateStart(DateType.SpecialDate, openData)
    else
        local messageBody = PoolUtil.GetTable()
        messageBody.IsGiveUp = true
        GrpcMgr.SendRequest(RpcDefines.GetSpecialDateRewardRequest, messageBody, true)
        PoolUtil.ReleaseTable(messageBody)
        UICommonUtil.ShowMessage(UITextConst.UI_TEXT_7009)
    end
end

return MsgCmd_GetCurrentSpecialDateReply
