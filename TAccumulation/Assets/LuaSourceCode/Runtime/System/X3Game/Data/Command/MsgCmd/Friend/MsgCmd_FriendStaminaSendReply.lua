--- Generated by AutoGen
---
---@class MsgCmd_FriendStaminaSendReply
local MsgCmd_FriendStaminaSendReply = class("MsgCmd_FriendStaminaSendReply", require("Runtime.System.Framework.GameBase.Misc.SimpleCommand"))

---Command执行
---@param reply pbcmessage.FriendStaminaSendReply
function MsgCmd_FriendStaminaSendReply:Execute(reply)
    if reply then
        ---@type FriendProxy
        local proxy = SelfProxyFactory.GetFriendProxy()
        local friendStaminaSendList = reply.FriendStaminaSendList
        if friendStaminaSendList and #friendStaminaSendList > 0 then
            local isBatch = BllMgr.GetFriendBLL():GetIsSendBatch()
            for _, uid in ipairs(friendStaminaSendList) do
                ---根据Id，从好友列表获取名字
                local info = proxy:GetFriendedByUid(uid)
                if info then
                    if not isBatch then
                        local fullName = ""
                        if info.DelTime == 0 or info.DelTime > TimerMgr.GetCurTimeSeconds() then
                            fullName = PlayerUtil.GetFixName(info.FamilyName, info.Name)
                        else
                            fullName = UITextHelper.GetUIText(UITextHelper.GetUIText(UITextConst.UI_TEXT_37060))
                        end
                        UICommonUtil.ShowMessage(UITextConst.UI_TEXT_30506, fullName)
                    end
                    ---添加我赠送礼物的好友
                    proxy:AddStaminaSend(uid)
                    proxy:RefreshFriendedItem(info)
                end
            end

            if isBatch then
                UICommonUtil.ShowMessage(UITextConst.UI_TEXT_30508)
            end
            ---更新好友数据列表
            EventMgr.Dispatch("EVENT_REFRESH_FRIENDED_SCROLLVIEW")
        else
            Debug.Log("RecvMsg_FriendStaminaSendReply error, serverdata.FriendStaminaSendList = nilOrEmpty")
        end
    else
        Debug.Log("RecvMsg_FriendStaminaSendReply error, serverdata = nil")
    end
end

return MsgCmd_FriendStaminaSendReply
