--- Generated by AutoGen
---
---@class MsgCmd_SyncUserTotalDataReply
local MsgCmd_SyncUserTotalDataReply = class("MsgCmd_SyncUserTotalDataReply", require("Runtime.System.Framework.GameBase.Misc.SimpleCommand"))

---Command执行
---@param data pbcmessage.SyncUserTotalDataReply
function MsgCmd_SyncUserTotalDataReply:Execute(data)
    DBMgr.Init(string.concat(data.Uid, "_", data.Base and data.Base.CreateTime or ""))
    ---接入CrashSight数据上报
    CrashSightMgr.SetUID(tostring(data.Uid))
    CriticalLog.LogFormat("config.userID: %s", data.Uid)

    ---Uid率先初始化=
    SelfProxyFactory.GetPlayerInfoProxy():OnEnterGame(data.Uid, data.Personal, data.Base,
            data.Frame, data.Title)

    local isSuccess = GameStateMgr.Switch(GameState.EnterGame, data)
    if not isSuccess then
        ---@type EnterGameMgr
        local EnterGameMgr = require("Runtime.System.X3Game.Modules.EnterGame.EnterGameMgr")
        EnterGameMgr.InitDataBeforeEnterGame(data, true)
        EnterGameMgr.InitEnterGameData(data)
    end
end

return MsgCmd_SyncUserTotalDataReply
