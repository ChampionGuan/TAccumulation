---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by aoliao.
--- DateTime: 2023/2/20 10:52
---DailyConfideProxy

---@class DailyConfideProxy:BaseProxy
local DailyConfideProxy = class("DailyConfideProxy", BaseProxy)

function DailyConfideProxy:OnInit()
    ---@type X3Data.DailyConfideData
    self.dailyConfideData = X3DataMgr.GetOrAdd(X3DataConst.X3Data.DailyConfideData)
    self.dailyConfideItemCfg =LuaCfgMgr.GetAll("DailyConfideItem")
end

---@return X3Data.DailyConfideData
function DailyConfideProxy:GetData()
    return self.dailyConfideData
end

---@return table 获取指定男主的道具商品ID
function DailyConfideProxy:GetShopIDByRoleID(roleID)
    local cfg = self.dailyConfideItemCfg[roleID] or {}
    return cfg.ShopItemID or {}
end

---@return X3Data.DailyConfideRecord
function DailyConfideProxy:GetDailyConfideCompleteRecordDataByRoleId(roleId)
    local datas = self:GetData():GetRecords()
    if not datas then
        return nil
    end
    return datas[roleId]
end

---@param recordData X3Data.DailyConfideRecord|nil 如果没有值就删除
function DailyConfideProxy:UpdateRecordsValue(roleId,recordData)
    if recordData then
        self:GetData():AddOrUpdateRecordsValue(roleId,recordData)
    else
        self:GetData():RemoveRecordsValue(roleId)
    end
end

---@return table<int,X3Data.DailyConfideRecord>
function DailyConfideProxy:GetDailyConfideCompleteRecordDataByDate(isToday)
    local datas = self:GetData():GetRecords()
    if not datas then
        return nil
    end
    local result = {}
    for k, v in pairs(datas) do
        if isToday then
            table.insert(result,v:GetTodayRecord())
        else
            table.insert(result,v:GetYesterdayRecord())
        end
    end
    return result
end

return DailyConfideProxy