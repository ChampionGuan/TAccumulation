---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by doudou.
--- DateTime: 2022/5/20 0:27
---@class FriendCacheData
local FriendCacheData = class("FriendCacheData")

function FriendCacheData:ctor()
    self._otherInfoDict = {}
end

function FriendCacheData:OnClear()
    self._otherInfoDict = nil
end

------------------------------------------------------------------------------------------------------------------------
----@private 内部函数
----其他玩家临时信息，0、设置为弱表 2、他人信息BLL
------------------------------------------------------------------------------------------------------------------------
local _REFRESH_TIME_DELTA = 10
function FriendCacheData:GetOtherPlayer(targetID)
    local playerInfo = self._otherInfoDict[targetID]
    if playerInfo and os.time() - playerInfo.time <= _REFRESH_TIME_DELTA then
        return playerInfo.player
    end
end

function FriendCacheData:AddOtherPlayer(targetID, fullInfo)
    local player = self._otherInfoDict[targetID]
    if player then
        ----刷新playerInfo and timestamp
        player = { time = os.time(), player = fullInfo }
    else
        player = { time = os.time(), player = fullInfo }
        self._otherInfoDict[targetID] = player
    end
end

return FriendCacheData