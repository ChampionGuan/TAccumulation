---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by deling.
--- DateTime: 2022/12/23 10:58
---

---@class RadioPlayerUtil
local RadioPlayerUtil = class("RadioPlayerUtil")

function RadioPlayerUtil:Init()

end

RadioPlayerUtil:Init()


---Editor下检查音频文件是否存在
function RadioPlayerUtil.CheckVoice(radioSubConfig)
    if(UNITY_EDITOR and radioSubConfig) then
        --Debug.LogError("CheckVoice ", radioSubConfig.VoiceName, " T ", type(radioSubConfig.VoiceName))
        ---策划不同表有遗留问题，空语音可能配0
        if(not (string.isnilorempty(radioSubConfig.VoiceName) or radioSubConfig.VoiceName == "0" )) then
            local name = radioSubConfig.VoiceName
            local exist = WwiseMgr.CheckEventExist(name)
            if(not exist) then
                Debug.LogError("单句音频不存在，对应名称为：", name)
                return false
            end
        end
    end
    return true
end

function RadioPlayerUtil.CheckRadioSubConfig(radioName)
    local _subData = LuaCfgMgr.GetAll(radioName)
    local curNum = 0
    for __, subConfig in pairs(_subData) do
        local result = RadioPlayerUtil.CheckVoice(subConfig)
        if(not result) then
            curNum = curNum + 1
        end
    end
    Debug.LogError("检查完毕，表名: ", radioName, " 不存在的音频共计", curNum)
    return curNum
end

---检查所有广播剧的单句音频状态
function RadioPlayerUtil.CheckAllSubConfig()
    local index = 0
    if(UNITY_EDITOR) then
        local _radioData = LuaCfgMgr.GetAll("RadioInfo")
        for _, radioConfig in pairs(_radioData) do
            local curNum = RadioPlayerUtil.CheckRadioSubConfig(radioConfig.RadioName)
            index = index + curNum
        end
        Debug.LogError("所有广播剧单句音频检查完毕，问题共计：", index)
    else
        Debug.LogError("对应检查仅在Editor下提供")
    end
end


return RadioPlayerUtil