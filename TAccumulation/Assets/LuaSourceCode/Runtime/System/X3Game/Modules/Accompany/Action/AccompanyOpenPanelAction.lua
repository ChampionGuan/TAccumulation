---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by fusu.
--- DateTime: 2023/4/6 14:07
---

local AccompanyBaseAction = require("Runtime.System.X3Game.Modules.Accompany.Action.AccompanyBaseAction")

---@class AccompanyOpenPanelAction : AccompanyBaseAction
local AccompanyOpenPanelAction = class("AccompanyOpenPanelAction" , AccompanyBaseAction)

function AccompanyOpenPanelAction:Init(actionParam)
    ---界面名称
    ---@type string
    self._wndName = actionParam[1]
    self:_RegisterEvent()
end

function AccompanyOpenPanelAction:_RegisterEvent()
    EventMgr.AddListener(Const.Event.GLOBAL_UIVIEW_ON_CLOSE , self._OnUIViewClose , self)
end

function AccompanyOpenPanelAction:OnConditionPass()
    UIMgr.Open(self._wndName)
end

function AccompanyOpenPanelAction:_OnUIViewClose(viewData)
    if self._wndName == viewData.ViewTag then
        self:OnFinish()
    end
end

return AccompanyOpenPanelAction