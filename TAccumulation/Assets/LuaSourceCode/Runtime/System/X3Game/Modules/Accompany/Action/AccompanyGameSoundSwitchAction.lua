---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by fusu.
--- DateTime: 2023/4/6 14:07
---

local AccompanyConst = require("Runtime.System.X3Game.Modules.Accompany.Data.AccompanyConst")
local AccompanyBaseAction = require("Runtime.System.X3Game.Modules.Accompany.Action.AccompanyBaseAction")

---@class AccompanyGameSoundSwitchAction : AccompanyBaseAction
local AccompanyGameSoundSwitchAction = class("AccompanyGameSoundSwitchAction" , AccompanyBaseAction)

function AccompanyGameSoundSwitchAction:Init(actionParam)
    self._switchOn = actionParam[1]
end

function AccompanyGameSoundSwitchAction:OnConditionPass()
    if self._switchOn then
        GameSoundMgr.SetAutoMode(true)
        EventMgr.Dispatch(GameSoundMgr.CONST_VIEW_TAG_CHANGE)
    else
        GameSoundMgr.SetAutoMode(false)
        GameSoundMgr.StopMusic()
    end
    self:OnFinish()
end

return AccompanyGameSoundSwitchAction