---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/7/12 19:55
---

local AIAction = require("Runtime.Plugins.AIDesigner.Base.AITask").AIAction
---@type BlockTowerConst
local Const = require("Runtime.System.X3Game.Modules.BlockTower.BlockTowerConst")

---Category:Date/BlockTower
---块放置行为
---@class BlockPutAction:AIAction
local BlockPutAction = class("BlockPutAction", AIAction)

---
function BlockPutAction:OnEnter()
    ---@type BlockTowerGameController
    self.gameController = self.tree:GetVariable("GameController")
    ---@type BlockTowerGameData
    self.gameData = self.gameController:GetGameData()
end

---
function BlockPutAction:OnUpdate()
    if self.gameController:CanPutTop() or self.gameData.blockTowerControlMode ~= Const.ControlMode.Put then
        self.gameController:PutBlock()
        return AITaskState.Success
    end
    return AITaskState.Failure
end

return BlockPutAction