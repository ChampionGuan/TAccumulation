---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by baozhatou.
--- DateTime: 2023/6/21 16:14
---


---@type MiaoBaseAIAction
local BaseAIAction = require("PureLogic.AI.Task.Miao.MiaoBaseAIAction")
--- 获取指定的功能牌在牌堆中的索引，没找到默认索引为1
---Category:Miao
---@class GetTargetFuncCardIndexInPile:MiaoBaseAIAction
---@field targetCardID AIVar | Int 指定要获取的功能牌ID
---@field targetCardIndex AIVar | Int 指定功能牌在牌堆中的索引
local GetTargetFuncCardIndexInPile = class("GetTargetFuncCardIndexInPile",BaseAIAction)

function GetTargetFuncCardIndexInPile:OnEnter()

    local targetCardID = self.targetCardID:GetValue()
    local index = 1
    local bbComp = self.entity:GetComponent(Miao.Component.Debug.BlackboardComp)
    local chessBoard = bbComp:GetChessBoard()
    for k,v in pairs(chessBoard.FuncCardPile) do
        if v == targetCardID then
            index = k
            break
        end
    end
    self.targetCardIndex:SetValue(index)
end

function GetTargetFuncCardIndexInPile:OnUpdate()
    return AITaskState.Success
end

return GetTargetFuncCardIndexInPile