---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by chaoguan.
--- DateTime: 2021/4/27 11:39
---

---@class TargetLookMode:CameraModeBase
---@field virtualCamera VirtualCamera
local TargetLookMode = class("TargetLookMode", require("Runtime.System.X3Game.Modules.Camera.Base.CameraModeBase"))
TargetLookMode.CameraClassType = CameraClassType.Virtual

function TargetLookMode:OnAwake()
    EventMgr.AddListener(CameraEvent.Follow, self._SetFollow, self)
    EventMgr.AddListener(CameraEvent.LookAt, self._SetLookAt, self)
    EventMgr.AddListener(CameraEvent.FOV, self._SetFOV, self)
    EventMgr.AddListener(CameraEvent.DistanceFactor, self._SetDistanceFactor, self)
end

function TargetLookMode:OnDestroy()
    EventMgr.RemoveListenerByTarget(self)
end

---@param fov number
function TargetLookMode:_SetFOV(fov)
    if not fov then
        return
    end
    self.virtualCamera:SetFov(fov)
end

---@param isSmooth boolean
---@param tgt UnityEngine.Transform
function TargetLookMode:_SetFollow(isSmooth, tgt)
    self.virtualCamera:SetFollow(tgt, isSmooth)
end

---@param isSmooth boolean
---@param tgt UnityEngine.Transform
function TargetLookMode:_SetLookAt(isSmooth, tgt)
    self.virtualCamera:SetLookAt(tgt, isSmooth)
end

---@param factor number
function TargetLookMode:_SetDistanceFactor(factor)
    if factor and self.virtualCamera.SetCameraDistanceFactor then
        self.virtualCamera:SetCameraDistanceFactor(factor)
    end
end

return TargetLookMode