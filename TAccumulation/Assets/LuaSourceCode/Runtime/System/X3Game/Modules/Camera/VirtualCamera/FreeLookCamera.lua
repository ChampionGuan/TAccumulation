---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by chaoguan.
--- DateTime: 2021/4/15 10:58
---

local CinemachineCoreStage = CS.Cinemachine.CinemachineCore.Stage

---@class FreeLookCamera:VirtualCameraBase
local FreeLookCamera = class("FreeLookCamera", require("Runtime.System.X3Game.Modules.Camera.Base.VirtualCameraBase"))
FreeLookCamera.CineMachineCameraType = CS.Cinemachine.CinemachineFreeLook

---@param value number
function FreeLookCamera:SetFarClipPlane(value)
    local lens = self._cineMachineVirtualCamera.m_Lens
    lens.FarClipPlane = value
    self._cineMachineVirtualCamera.m_Lens = lens
end

---@param fov number
function FreeLookCamera:SetFov(fov)
    local lens = self._cineMachineVirtualCamera.m_Lens
    lens.FieldOfView = fov
    self._cineMachineVirtualCamera.m_Lens = lens
end

---@return number
function FreeLookCamera:GetFov()
    return self._cineMachineVirtualCamera.m_Lens.FieldOfView
end

---@param rigType CameraFreeLookRigType
---@param orbit Cinemachine.CinemachineFreeLook.Orbit
function FreeLookCamera:SetOrbit(rigType, orbit)
    self._cineMachineVirtualCamera.m_Orbits[rigType] = orbit
end

---@param rigType CameraFreeLookRigType
---@return Cinemachine.CinemachineFreeLook.Orbit
function FreeLookCamera:GetOrbit(rigType)
    return self._cineMachineVirtualCamera.m_Orbits[rigType]
end

---@param rigType CameraFreeLookRigType
---@return Cinemachine.CinemachineComposer
function FreeLookCamera:GetAim(rigType)
    return self:_GetRig(rigType):GetCinemachineComponent(CinemachineCoreStage.Aim)
end

---@param rigType CameraFreeLookRigType
---@return Cinemachine.CinemachineOrbitalTransposer
function FreeLookCamera:GetBody(rigType)
    return self:_GetRig(rigType):GetCinemachineComponent(CinemachineCoreStage.Body)
end

---@param delta UnityEngine.Vector2
function FreeLookCamera:SetAxisInputValue(delta)
    self._setAxisInputValueCoroutine = self:_StopCoroutine(self._setAxisInputValueCoroutine)
    self._setAxisInputValueCoroutine = self:_StartCoroutine(self._SetAxisInputValue, self, delta)
end

---@param value number 值(0-1之间)
function FreeLookCamera:SetYAxisValue(value)
    local yAxis = self._cineMachineVirtualCamera.m_YAxis
    yAxis.Value = value
    self._cineMachineVirtualCamera.m_YAxis = yAxis
end

---@return number
function FreeLookCamera:GetYAxisValue()
    return self._cineMachineVirtualCamera.m_YAxis.Value
end

---@param bindingMode CameraBindingMode
function FreeLookCamera:SetBindingMode(bindingMode)
    self._cineMachineVirtualCamera.m_BindingMode = bindingMode
end

---@param value number 值,递增镜头朝向
function FreeLookCamera:SetXAxisValue(value)
    local xAxis = self._cineMachineVirtualCamera.m_XAxis
    xAxis.Value = value
    self._cineMachineVirtualCamera.m_XAxis = xAxis
end

---@return number
function FreeLookCamera:GetXAxisValue()
    return self._cineMachineVirtualCamera.m_XAxis.Value
end

function FreeLookCamera:_SetAxisInputValue(delta)
    local xAxis = self._cineMachineVirtualCamera.m_XAxis
    xAxis.m_InputAxisValue = delta.x
    self._cineMachineVirtualCamera.m_XAxis = xAxis

    local yAxis = self._cineMachineVirtualCamera.m_YAxis
    yAxis.m_InputAxisValue = delta.y
    self._cineMachineVirtualCamera.m_YAxis = yAxis

    coroutine.yield(nil)
    coroutine.yield(nil)

    xAxis.m_InputAxisValue = 0
    self._cineMachineVirtualCamera.m_XAxis = xAxis

    yAxis.m_InputAxisValue = 0
    self._cineMachineVirtualCamera.m_YAxis = yAxis
end

---@param rigType CameraFreeLookRigType
---@return Cinemachine.CinemachineVirtualCameraBase
function FreeLookCamera:_GetRig(rigType)
    return self._cineMachineVirtualCamera:GetRig(rigType)
end

return FreeLookCamera
