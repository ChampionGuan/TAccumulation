---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by pc.
--- DateTime: 2020/9/14 11:37
---
local CatCardConst = require("Runtime.System.X3Game.Modules.CatCard.Data.CatCardConst")
local BaseAni = require(CatCardConst.BASE_ANIMATION_PATH)
local SwitchAnimation = class("SwitchAnimation",BaseAni)
function SwitchAnimation:Execute(model1,model2,speed,callback,is_revert)
    self.model1 = model1
    self.model2 = model2
    self.callback = callback
    local model1_trans = GameObjectUtil.GetComponent(model1,nil,"Transform")
    local model2_trans = GameObjectUtil.GetComponent(model2,nil,"Transform")
    local start_pos = model1_trans.position
    local end_pos = model2_trans.position
    if not is_revert then
        self:Play(CatCardConst.AnimationState.MOVE,model1,nil,start_pos,end_pos,speed)
        self:SetIsRunning(false)
        self:Play(CatCardConst.AnimationState.MOVE,model2,handler(self,self.OnFinish),end_pos,start_pos,speed)
    else
        GameObjectUtil.SetLocalPosition(model1,0,0,0)
        end_pos = model1_trans.position
        self:Play(CatCardConst.AnimationState.MOVE,model1,nil,start_pos,end_pos,speed)
        self:SetIsRunning(false)
        start_pos = model2_trans.position
        GameObjectUtil.SetLocalPosition(model2,0,0,0)
        end_pos = model2_trans.position
        self:Play(CatCardConst.AnimationState.MOVE,model2,handler(self,self.OnFinish),start_pos,end_pos,speed)
    end
end

function SwitchAnimation:OnFinish()
    self.model1 = nil
    self.model2 = nil
    local callback = self.callback
    self.callback = nil
    if callback then
        callback()
    end
end
return SwitchAnimation