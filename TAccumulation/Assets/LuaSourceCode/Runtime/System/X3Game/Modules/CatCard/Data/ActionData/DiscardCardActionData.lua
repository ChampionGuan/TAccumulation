---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiaozhu.
--- DateTime: 2022/6/11 19:19
--- 扔牌数据
---@type CatCardConst
local CatCardConst = require("Runtime.System.X3Game.Modules.CatCard.Data.CatCardConst")
---@type CatCard.BaseActionData
local BaseActionData = require(CatCardConst.BASE_ACTION_DATA_PATH)
-----@class CatCard.DiscardCardActionData:CatCard.BaseActionData
local DiscardCardActionData = class("DiscardCardActionData", BaseActionData)

function DiscardCardActionData:ctor()
    BaseActionData.ctor(self)
    ---卡的位置
    ---@type int
    self.posIndex = 0
    ---卡的数据信息
    ---@type CatCardData
    self.data = nil
    ---卡运行速度
    ---@type number
    self.speed = 0
end

--region Set

---@param sp int
function DiscardCardActionData:SetSpeed(sp)
    self.speed = sp
end

---@param posIndex int
function DiscardCardActionData:SetPosIndex(posIndex)
    self.posIndex = posIndex
end
--endregion

--region Get
---@return int
function DiscardCardActionData:GetPosIdx()
    return self.posIndex
end

---@return CatCardData
function DiscardCardActionData:GetData()
    if not self.data then
        self.data = self.bll:GenData(CatCardConst.CardType.CARD,self:GetCardId(),self:GetPosIdx())
    end
    return self.data
end
--endregion

---@param cardId int
---@param posIndex int
function DiscardCardActionData:Set(cardId,posIndex)
    self:SetCardId(cardId)
    self:SetPosIndex(posIndex)
end

--region Action自定义接口


---@param params int[]
function DiscardCardActionData:SetParam(params)
    if not table.isnilorempty(params) then
        local card_id = params[1]
        local pos_idx = self.bll:GetOldCardIndex(card_id,self:GetPlayerType())
        self:SetCardId(card_id,pos_idx)
    end
end

function DiscardCardActionData:OnInit()
    self:SetPosIndex(0)
    self:SetSpeed(CatCardConst.CARD_SPEED)
end

function DiscardCardActionData:OnClear()
    self.bll:ReleaseData(self.data)
end
--endregion

return DiscardCardActionData