---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by pc.
--- DateTime: 2020/10/26 16:44
---
---单论结算
local CatCardConst = require("Runtime.System.X3Game.Modules.CatCard.Data.CatCardConst")
---@type CatCard.Action.RoundEndAction
local BaseAction = require(string.concat(CatCardConst.BASE_LUA_ACTION_DIR,"RoundEndAction"))
---@class CatCard.Guide.Action.RoundEndAction:CatCard.Action.RoundEndAction
local RoundEndAction = class("RoundEndAction",BaseAction)

function RoundEndAction:Execute()
    BaseAction.Execute(self)
end

---是否可以显示单论计算ui
---@return boolean
function RoundEndAction:IsCanRoundResultView()
    if self.bll:GetStateData():GetMaxRoundCount() == 1 then
        return false
    end
    return self.bll:GetStateData():GetRoundState() ~= CatCardConst.RoundCheckType.None
end


function RoundEndAction:LocalStateChange(st,...)
    if st == CatCardConst.LocalState.ROUNDENDING_WAIT_TOUCH then
        if not self:IsCanRoundResultView() then
            self.bll:SetLocalState(CatCardConst.LocalState.ROUNDENDING_ON_VIEW_TOUCH)
            return
        end
    end
    BaseAction.LocalStateChange(self,st,...)
end


return RoundEndAction