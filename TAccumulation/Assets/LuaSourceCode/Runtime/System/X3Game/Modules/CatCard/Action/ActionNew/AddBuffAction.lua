---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xiaofang.
--- DateTime: 2022/6/7 19:42
---@type CatCardConst
local CatCardConst = require("Runtime.System.X3Game.Modules.CatCard.Data.CatCardConst")
---@type CatCard.CatCardBaseAction
local BaseAction = require(CatCardConst.BASE_ACTION_PATH_NEW)
---@class CatCard.AddBuffAction:CatCard.CatCardBaseAction
local AddBuffAction = class("AddBuffAction", BaseAction)

---@param action_data CatCard.AddBuffData
function AddBuffAction:Begin(action_data)
    self.buffID = action_data:GetBuffID()
    self.playerType = action_data:GetPlayerType()
    if self.buffID ~= CatCardConst.BuffType.ExciteCard then
        ---由于buff作用在对方身上，所以此处要取反
        if self.playerType == CatCardConst.PlayerType.PLAYER then
            self.playerType = CatCardConst.PlayerType.ENEMY
        else
            self.playerType = CatCardConst.PlayerType.PLAYER
        end
    end
    EventMgr.Dispatch(CatCardConst.Event.CAT_CARD_REFRESH_BUFF_INFO, self.buffID, self.playerType, true)
    self.bll:GetStateData():AddBuffCache(self.playerType, self.buffID)
    self:End()
end

return AddBuffAction