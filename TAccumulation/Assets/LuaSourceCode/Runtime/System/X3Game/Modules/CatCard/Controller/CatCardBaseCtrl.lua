---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by pc.
--- DateTime: 2020/8/28 17:52
---
---@class BaseCatCardCtrl
local BaseCatCardCtrl = class("BaseCatCardCtrl")

function BaseCatCardCtrl:ctor()
    ---@type CatCardBLL
    self.bll = nil
    self.isPause = false
end

function BaseCatCardCtrl:OnPause()
    
end

function BaseCatCardCtrl:OnResume()
    
end

function BaseCatCardCtrl:SetPause(pause)
    if pause~=self.isPause then
        self.isPause = pause
        if pause then
            self:OnPause()
        else
            self:OnResume()
        end
    end
    
end

---@return boolean
function BaseCatCardCtrl:IsPause()
    return self.isPause
end

function BaseCatCardCtrl:Init()
    self.node_map = {}
end

function BaseCatCardCtrl:PreInit()
    self:Init()
    local type_map = self:GetTypeMap()
    if type_map then
        for _,v in pairs(type_map) do
            self:GetHandler(v)
        end
    end
end

function BaseCatCardCtrl:GetHandler(_type)
    return nil
end

function BaseCatCardCtrl:GetTypeMap()
    return nil
end

function BaseCatCardCtrl:IsRunning()
    if not self.node_map then
        return false
    end
    local is_running = false
    for k,v in pairs(self.node_map) do
        if v:IsRunning() then
            is_running = true
            if self.bll:IsDebugMode() then
                self.bll:Log("Running--node---",v.__cname)
            end
            break
        end
    end
    return is_running
end

---owner:CatCardMainCtrl
function BaseCatCardCtrl:SetOwner(owner)
    self.owner = owner
end

function BaseCatCardCtrl:GetCtrl(ctrl_type)
    return self.owner:GetCtrl(ctrl_type)
end


function BaseCatCardCtrl:SetBll(bll)
    ---@type CatCardBLL
    self.bll = bll
end

function BaseCatCardCtrl:Check()
    
end

function BaseCatCardCtrl:Enter()
    self:SetBll(BllMgr.GetCatCardBLL())
    self:PreInit()
end

function BaseCatCardCtrl:Exit()
    if self.node_map then
        for k,v in pairs(self.node_map) do
            v:Exit()
        end
    end
    GameUtil.ClearTarget(self)
end

return BaseCatCardCtrl