---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xiaofang.
--- DateTime: 2022/12/21 16:43
---猫被拎起action
---@type CatCardConst
local CatCardConst = require("Runtime.System.X3Game.Modules.CatCard.Data.CatCardConst")
---@type CatCard.CatCardBaseAction
local BaseAction = require(CatCardConst.BASE_ACTION_PATH_NEW)
---@class CatCard.SelectCatPickAction:CatCard.CatCardBaseAction
local SelectCatPickAction = class("SelectCatPickAction", BaseAction)

---@param action_data CatCard.SelectCatPickActionData
function SelectCatPickAction:Begin(action_data)
    self.slotIndex = action_data:GetSlotIndex()
    self.isPick = action_data:GetIsPick()
    self:SetCatPick()
end

function SelectCatPickAction:SetCatPick()
    local layer = self.isPick and Const.LayerMask.RT or Const.LayerMask.DEFAULT
    local func = function()
        self:End()
    end
    if self.isPick then
        EventMgr.Dispatch(CatCardConst.Event.CAT_CARD_SET_MODEL_LAYER, layer, CatCardConst.CardType.SLOT, self.slotIndex)
    else
        func = function()
            EventMgr.Dispatch(CatCardConst.Event.CAT_CARD_SET_MODEL_LAYER, layer, CatCardConst.CardType.SLOT, self.slotIndex)
            self:End()
        end
    end
    EventMgr.Dispatch(CatCardConst.Event.CAT_CARD_SET_CAT_SELECT, self.slotIndex, self.isPick, func)
end

return SelectCatPickAction
