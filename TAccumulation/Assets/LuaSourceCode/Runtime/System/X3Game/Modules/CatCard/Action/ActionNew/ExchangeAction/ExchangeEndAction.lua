---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xiaofang.
--- DateTime: 2022/12/29 11:00
---ExchangeEndAction
---@type CatCardConst
local CatCardConst = require("Runtime.System.X3Game.Modules.CatCard.Data.CatCardConst")
---@type CatCard.CatCardBaseAction
local BaseAction = require(CatCardConst.BASE_ACTION_PATH_NEW)
---@class CatCard.ExchangeEndAction:CatCard.CatCardBaseAction
local ExchangeEndAction = class("ExchangeEndAction", BaseAction)

---@param action_data CatCard.ExchangeEndActionData
function ExchangeEndAction:Begin(action_data)
    self.stateData = self.bll:GetStateData()
    if self.stateData:GetExchangeType() == CatCardConst.ExchangeType.ENDED then
        self.stateData:ClearActionRes()
        self.stateData:ClearRecord()
        self.bll:SetIsExchange(false)
        EventMgr.Dispatch(CatCardConst.Event.CAT_CARD_REFRESH_MODELS, CatCardConst.CardType.CARD, true)
        EventMgr.Dispatch(CatCardConst.Event.CAT_CARD_SET_SELECT_ENABLE, true)
    end
    action_data:SetIsBreak(true)
    self:End()
end

function ExchangeEndAction:End()
    BaseAction.End(self)
end

return ExchangeEndAction
