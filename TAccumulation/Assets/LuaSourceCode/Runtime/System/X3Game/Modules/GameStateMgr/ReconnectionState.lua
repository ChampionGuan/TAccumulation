---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by muchen.
--- DateTime: 2022/11/11 14:26
---
local BaseLoginState = require("Runtime.System.X3Game.Modules.GameStateMgr.BaseLoginState")
---@class ReconnectionState
local ReconnectionState = class("ReconnectionState", BaseLoginState)

function ReconnectionState:OnEnter(prevStateName)
    BaseLoginState.OnEnter(self)
end

function ReconnectionState:InternalEnter()
    ---设置游戏重启状态
    GameMgr.SetGameReboot(false)
    ---TODO 临时逻辑,初始化一次InputEffect防止材质丢失, 原因待查
    InputEffectMgr.Init()

    ---设置提审状态
    AppInfoMgr.InitSkipEnable()

    ---强制关闭重启后的loading预制体
    UICommonUtil.ForceCloseLoading()

    ---断线重连重新初始化玩家画质设置
    BllMgr.GetSystemSettingBLL():InitGraphicsSetting()

    UICommonUtil.SetLoadingEnable(GameConst.LoadingType.Common, false)
    UICommonUtil.SetLoadingEnable(GameConst.LoadingType.Common, true)
    GrpcMgr.Connect()
end

function ReconnectionState:OnExit(nextStateName)
    self.super.OnExit(self)
end

return ReconnectionState