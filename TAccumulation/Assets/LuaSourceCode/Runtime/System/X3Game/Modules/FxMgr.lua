---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jianxin.
--- DateTime: 2023/9/22 17:47
---

---FxMgr lua
---@class FxMgr
local FxMgr = {}

---@class FxMgr.FadeTyp
FxMgr.FadeTyp = {
    None = 0,
    FadeIn = 1,
    FadeOut = 2,
    DestroyFadeOut = 3
}

local cs_fxMgr = CS.X3Game.FxMgr
local cs_fxMgr_instance = nil

function FxMgr.Init()
    if not Application.IsPlaying() then
        return
    end
    cs_fxMgr_instance = cs_fxMgr.Instance
    FxMgr.isInit = true
end

function FxMgr.Clear()
    if cs_fxMgr_instance ~= nil then
        cs_fxMgr_instance:Clear()
    end
end

---@param fxPath string
---@param parent Transform
---@param fadeDuration float
---@return int playID
function FxMgr.PlayFx(fxPath, parent, fadeDuration)
    if cs_fxMgr_instance ~= nil then
        local fxID = cs_fxMgr_instance:PlayFx(fxPath, parent, fadeDuration)
        local fxPlayer = cs_fxMgr_instance:GetFxPlayer(fxID)
        ---从池取出的fx需要执行rePlay
        if fxPlayer ~= nil then
            fxPlayer:RePlay()
        end
        return fxID
    end
    return -1
end

---@param playID int
---@param fadeType  FxMgr.FadeTyp
---@param fadeDuration float
function FxMgr.PlayFade(playID, fadeType, fadeDuration)
    if cs_fxMgr_instance ~= nil then
        cs_fxMgr_instance:PlayFade(playID, fadeType, fadeDuration)
    end
end

---@param playID int
---@param fadeDuration float
function FxMgr.StopFx(playID, fadeDuration)
    if cs_fxMgr_instance ~= nil then
        cs_fxMgr_instance:StopFx(playID, fadeDuration)
    end
end

---@param playID int
---@return FxPlayer
function FxMgr.GetFxPlayer(playID)
    if cs_fxMgr_instance ~= nil then
        return cs_fxMgr_instance:GetFxPlayer(playID)
    end
    return nil
end

---@param playID int
---@return GameObject
function FxMgr.GetFxGameObjIns(playID)
    if cs_fxMgr_instance ~= nil then
        return cs_fxMgr_instance:GetFxGameObjIns(playID)
    end
    return nil
end

---Tick
function FxMgr.OnUpdate()
    if not Application.IsPlaying() then
        return
    end
    if cs_fxMgr_instance ~= nil then
        cs_fxMgr_instance:OnUpdate()
    end
end

function FxMgr.OnLateUpdate()
    if not Application.IsPlaying() then
        return
    end
    if FxMgr.isInit then
        if cs_fxMgr_instance ~= nil then
            cs_fxMgr_instance:OnLateUpdate()
        end
    end
end

function FxMgr.Destroy()
    FxMgr.Clear()
end

return FxMgr