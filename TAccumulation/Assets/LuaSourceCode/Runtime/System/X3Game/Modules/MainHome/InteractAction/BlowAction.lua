---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiaozhu.
--- DateTime: 2022/4/4 14:44
---
---@type MainHome.MainHomeConst
local MainHomeConst = require("Runtime.System.X3Game.Modules.MainHome.Data.MainHomeConst")
---@type MainHome.BaseInteractAction
local BaseAction = require(MainHomeConst.BASE_INTERACT_ACTION)
---@class MainHome.BlowAction:MainHome.BaseInteractAction
local BlowAction = class("BlowAction", BaseAction)
function BlowAction:Begin()
    BaseAction.Begin(self)
    self:PlayDialogue()
    self:CheckCallBack()
end

---设置blow
function BlowAction:OnEventSetBlowEnable(isEnable)
    if isEnable then
        self:Trigger()
    else
        self:End()
    end
end

---检测保底吹气回调是否执行
function BlowAction:CheckCallBack()
    local callBack = BllMgr.GetMainInteractBLL():GetBlowCallBack()
    if callBack then
        callBack()
    end
end

function BlowAction:IsCanTrigger()
    return BllMgr.GetMainInteractBLL():GetBlowState()
end

function BlowAction:OnAddListener()
    EventMgr.AddListener(MainHomeConst.Event.MAIN_HOME_SET_BLOW_ENABLE, self.OnEventSetBlowEnable, self)
end

function BlowAction:End()
    Debug.LogFormatWithTag(GameConst.LogTag.Blow, "BlowAction End")
    self:CheckCallBack()
    BaseAction.End(self)
end
return BlowAction