---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiaozhu.
--- DateTime: 2022/3/5 19:26
--- 默认播放剧情的action
---@type MainHome.MainHomeConst
local MainHomeConst = require("Runtime.System.X3Game.Modules.MainHome.Data.MainHomeConst")
---@type MainHome.BaseInteractAction
local BaseAction = require(MainHomeConst.BASE_INTERACT_ACTION)
---@class MainHome.DefaultAction:MainHome.BaseInteractAction
local DefaultAction = class("DefaultAction", BaseAction)
function DefaultAction:Begin()
    BaseAction.Begin(self)
    self:PlayDialogue()
end

function DefaultAction:OnDialogueEnd(dialogueId, conversion, pipelineKey)
    BaseAction.OnDialogueEnd(self)
    if self:GetType() == MainHomeConst.ActionType.ScoreSpecialAction then
        local ctsGameObjectList = CutSceneMgr.GetCTSInsPool()
        if ctsGameObjectList ~= nil then
            for i = 0, ctsGameObjectList.Count - 1 do
                local gameObj = ctsGameObjectList[i]
                if gameObj ~= nil and not GameObjectUtil.IsNull(gameObj) then
                    GameObjectUtil.DestroyImmediate(gameObj)
                end
            end
        end
    end
end

return DefaultAction