---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiaozhu.
--- DateTime: 2022/4/25 11:28
--- 相机mode切换action
---@type MainHome.MainHomeConst
local MainHomeConst = require("Runtime.System.X3Game.Modules.MainHome.Data.MainHomeConst")
---@type MainHome.BaseInteractAction
local BaseAction = require(MainHomeConst.BASE_INTERACT_ACTION)
---@class MainHome.CameraModeAction:MainHome.BaseInteractAction
local CameraModeAction = class("CameraModeAction", BaseAction)

function CameraModeAction:Begin()
    BaseAction.Begin(self)
    local mode = self.bll:GetCurDoubleTouchType()
    self.bll:SetCameraMode(mode == MainHomeConst.DoubleTouchType.Near and MainHomeConst.CameraMode.LookAt or MainHomeConst.CameraMode.Normal)
end

function CameraModeAction:End()
    BaseAction.End(self)
    self.bll:SetCameraMode(MainHomeConst.CameraMode.Normal)
end

---双指移动结束
function CameraModeAction:OnEventDoubleTouchEnd()
    if not self:IsRunning() then
        self:Trigger()
    end
end

function CameraModeAction:OnAddListener()
    EventMgr.AddListener(MainHomeConst.Event.MAIN_HOME_DOUBLE_TOUCH_END,self.OnEventDoubleTouchEnd,self)
end
return CameraModeAction