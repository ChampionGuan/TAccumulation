---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by xiaofang.
--- DateTime: 2023/4/6 11:14

---@type MainHome.MainHomeConst
local MainHomeConst = require("Runtime.System.X3Game.Modules.MainHome.Data.MainHomeConst")
---@type MainHome.BaseInteractAction
local BaseAction = require(MainHomeConst.BASE_INTERACT_ACTION)
---@class MainHome.PlayerBirthdayAction:MainHome.BaseInteractAction
local PlayerBirthdayAction = class("PlayerBirthdayAction", BaseAction)

function PlayerBirthdayAction:Begin()
    BaseAction.Begin(self)
    BllMgr.GetPlayerBirthdayBLL():CheckEnterBirthdayDialogue()
    self:End()
end

function PlayerBirthdayAction:IsCanTrigger()
    --生日活动是否开启
    if not BllMgr.GetPlayerBirthdayBLL():CheckIfBirthdayActivityOpen() then
        return false
    end
    --非首次进入时不可再进
    if not BllMgr.GetPlayerBirthdayBLL():CheckIfBirthdayActivityFirstOpen() then
        return false
    end
    --非主界面Focus状态不可进
    if not BllMgr.GetMainHomeBLL():IsViewShow() then
        return false
    end
    return true
end

function PlayerBirthdayAction:End()
    BaseAction.End(self)
end

return PlayerBirthdayAction