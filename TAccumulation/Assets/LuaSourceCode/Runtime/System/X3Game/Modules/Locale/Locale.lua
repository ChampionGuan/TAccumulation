---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/11/11 19:13
---

---@class Locale
local Locale = class("Locale")
local CLS = CS.X3Game.AppInfoMgr
local CLS_INS = CLS.Instance
local LOCALE_CLS = CS.PapeGames.X3.Locale

---设置语言版本
---@param lang int
function Locale.SetLang(lang)
    CLS_INS:SetLang(lang)
    Res.SetLanguage(lang)
    SDKMgr.SetLanguage()
end

---返回语言版本
---@return int
function Locale.GetLang()
    local curLang = CLS_INS.Lang:GetHashCode()
    if curLang == 0 then
        curLang = Locale.Language.ZH_CN
    end
    return curLang
end

---仅限于编辑器下获取, 不建议运行时获取
---@param lang int
function Locale.GetLangName(lang)
    return LOCALE_CLS.GetLangName(lang)
end

---返回当前语言的CMS语言文本
---@return string
function Locale.GetCMSLangName()
    return Locale.CMSLanguageName[Locale.GetLang()]
end

---返回当前地区的默认语言CMS语言文本
function Locale.GetCMSFallbackLangName()
    return Locale.CMSLanguageName[Locale.GetFallbackLang()]
end

---返回AiHelp语言
---@return string
function Locale.GetAiHelpLangName()
    return Locale.AiHelpLanguageName[Locale.GetLang()]
end

---设置语音版本
---@param lang int
function Locale.SetSoundLang(lang)
    CLS_INS:SetSoundLang(lang)
    WwiseMgr.SetLanguage(lang)
    Res.SetSoundLanguage(lang)
    BllMgr.GetFaceBLL():RefreshPlayerVoice()
end

---返回语音版本
---@return int
function Locale.GetSoundLang()
    local curLang = CLS_INS.SoundLang:GetHashCode()
    if curLang == 0 then
        curLang = Locale.Language.ZH_CN
    end
    return curLang
end

---返回语音版本的字符串表达式
---@return string
function Locale.GetSoundLangName()
    local lang = Locale.GetSoundLang()
    return Locale.LanguageName[lang]
end

---设置地区 仅GM可以使用
---@param region int
function Locale.SetRegion(region)
    if UNITY_EDITOR then
        CLS_INS.AppInfo.Region = region
        CS.PapeGames.X3.Res.Region = region;
        CS.X3Game.GameMgr.ChangeRegionEditorOnly(region)
    else
        Debug.LogError("注意！！！真机环境不允许设置包体地区，请在编辑器环境测试")
    end
end

---获取多语言国家地区
---@return int
function Locale.GetRegion()
    return CLS_INS.AppInfo.Region
end

---保存UserAppInfo
function Locale.SaveUserAppInfo()
    CLS_INS:SaveUserAppInfo()
end

---根据语言初始化系统
function Locale.Init()
    local curLang = Locale.GetLang()
    Res.SetLanguage(curLang)
    UIMgr.SetLanguage(curLang)
    local regionCfg = LuaCfgMgr.GetAll("LocalizationRegion")
    for k, v in pairs(regionCfg) do
        Res.AddFallbackLang(k, v.FallbackLanguage)
        Res.AddDefaultLang(k, v.DefaultLanguage)
    end

    ---设置字体的Fallback关系
    local fontUtil = require("Runtime.System.X3Game.Modules.InputFieldAndFont.FontUtil")
    fontUtil.ForceReloadFontAsset(curLang)
end

function Locale.Clear()
    ---Do Something
end

---获取当前地区的默认语言
---@return int
function Locale.GetFallbackLang()
    local regionCfg = LuaCfgMgr.Get("LocalizationRegion", Locale.GetRegion())
    if regionCfg then
        return regionCfg.FallbackLanguage
    end
    return Locale.Language.ZH_CN
end

---获取当前地区的保底语言
---@return int
function Locale.GetDefaultLang()
    local regionCfg = LuaCfgMgr.Get("LocalizationRegion", Locale.GetRegion())
    if regionCfg then
        return regionCfg.DefaultLanguage
    end
    return Locale.Language.ZH_CN
end

---语种
---@class Locale.Language
Locale.Language = {
    ---中文简体
    ZH_CN = 1,
    ---中文繁体
    ZH_TW = 2,
    ---英语
    EN_US = 3,
    ---日语
    JA_JP = 4,
    ---韩语
    KO_KR = 5
}

---CMS上面的lang语言
---@class Locale.CMSLanguageName
Locale.CMSLanguageName = {
    [Locale.Language.ZH_CN] = "zh-cn",
    [Locale.Language.ZH_TW] = "zh-tw",
    [Locale.Language.EN_US] = "en",
    [Locale.Language.JA_JP] = "jp",
    [Locale.Language.KO_KR] = "ko",
}

Locale.LanguageName = {
    [Locale.Language.ZH_CN] = "zh-CN",
    [Locale.Language.ZH_TW] = "zh-TW",
    [Locale.Language.EN_US] = "en-US",
    [Locale.Language.JA_JP] = "ja-JP",
    [Locale.Language.KO_KR] = "ko-KR",
}

---地区
---@class Locale.Region
Locale.Region = {
    ---中国大陆
    ChinaMainland = 1,
    ---港澳台
    ChinaOther = 2,
    ---欧美、东南亚
    EuropeAmericaAsia = 3,
    ---日本
    Japan = 4,
    ---韩国
    SouthKorea = 5,
}

return Locale