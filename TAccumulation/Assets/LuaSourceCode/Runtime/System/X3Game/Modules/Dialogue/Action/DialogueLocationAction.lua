---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/1/18 10:51
---

---@class DialogueLocationAction:DialogueBaseAction
local DialogueLocationAction = class("DialogueLocationAction", require("Runtime.System.X3Game.Modules.Dialogue.Action.DialogueBaseAction"), nil ,true)
local DialogueTextUtil = require("Runtime.System.X3Game.Modules.Dialogue.Util.DialogueTextUtil")

---ActionInit
---@param cfg DialogueActionCfg
function DialogueLocationAction:OnInit(cfg)
    self.super.OnInit(self, cfg)
    ---@type string
    self.location = cfg.location
    ---@type string
    self.date = cfg.date
    ---@type boolean
    self.useDefaultLocationPos = cfg.useDefaultLocationPos
    ---@type Vector2
    self.locationPos = cfg.locationPos
end

---ActionEnter
function DialogueLocationAction:OnEnter()
    local data = {}
    data.location = DialogueTextUtil.GetActionText(self.dialogueId, self.nodeUniqueId, self.location)
    data.date = DialogueTextUtil.GetActionText(self.dialogueId, self.nodeUniqueId, self.date)
    data.useDefaultLocationPos = self.useDefaultLocationPos
    data.locationPos = self.locationPos
    EventMgr.Dispatch("DialoguePanelShowLocation", data)
end

return DialogueLocationAction