---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by dengzi.
--- DateTime: 2023/11/27 16:37
---

---CTS事件行为
---@class DialogueForceReplacePLHairAction:DialogueBaseAction
local DialogueForceReplacePLHairAction = class ("DialogueForceReplacePLHairAction", require("Runtime.System.X3Game.Modules.Dialogue.Action.DialogueBaseAction"), nil ,true)

---ActionInit
---@param cfg DialogueActionCfg
function DialogueForceReplacePLHairAction:OnInit(cfg)
    self.super.OnInit(self, cfg)
    ---@type boolean
    self.replaceEnable = cfg.replaceEnable
    ---@type Define.FaceChangeType
    self.faceChangeType = cfg.faceChangeType
    ---@type int
    self.faceHairId = cfg.faceHairId
end

---ActionEnter
function DialogueForceReplacePLHairAction:OnEnter()
    local assetIns = self.system:GetActor(GameConst.RoleId.Player)
    if assetIns and CharacterMgr.NeedFaceData(assetIns) then
        if self.replaceEnable then
            BllMgr.GetFaceBLL():SetHost(assetIns, self.faceChangeType, self.faceHairId)
        else
            BllMgr.GetFaceBLL():SetHost(assetIns)
        end
    end
    if self.replaceEnable then
        self.system:SetPlayerFaceHair(self.faceChangeType, self.faceHairId)
    else
        self.system:ClearPlayerFaceHair()
    end
end

return DialogueForceReplacePLHairAction