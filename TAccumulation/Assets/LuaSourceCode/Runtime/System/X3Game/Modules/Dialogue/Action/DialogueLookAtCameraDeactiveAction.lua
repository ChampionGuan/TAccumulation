---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/5/12 20:01
---

---@class DialogueLookAtCameraDeactiveAction:DialogueBaseAction
local DialogueLookAtCameraDeactiveAction = class("DialogueLookAtCameraDeactiveAction", require("Runtime.System.X3Game.Modules.Dialogue.Action.DialogueBaseAction"), nil ,true)

---@param cfg
function DialogueLookAtCameraDeactiveAction:OnInit(cfg)
    self.super.OnInit(self, cfg)
    ---@type int 由于Cinemachine的机制，相机行为必须下一帧销毁
    self.endFrame = 0
end

---ActionEnter
function DialogueLookAtCameraDeactiveAction:OnEnter()
    self.system:DeactiveLookAtCamera()
end

---Process函数
---@param progress float
function DialogueLookAtCameraDeactiveAction:OnProcess(progress)
    if self.endFrame ~= 0 and self.endFrame < TimerMgr.GetFrameCount() then
        return DialogueEnum.UpdateActionState.Complete
    end
    if self.super.OnProcess(self, progress) == DialogueEnum.UpdateActionState.Complete then
        self.endFrame = TimerMgr.GetFrameCount()
    end
    return DialogueEnum.UpdateActionState.Running
end

return DialogueLookAtCameraDeactiveAction