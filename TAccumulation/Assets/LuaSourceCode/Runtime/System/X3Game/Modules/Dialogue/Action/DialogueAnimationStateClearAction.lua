---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/1/12 15:15
---

---动画状态清除行为
---@class DialogueAnimationStateClearAction:DialogueBaseAction
local DialogueAnimationStateClearAction = class("DialogueAnimationStateClearAction", require("Runtime.System.X3Game.Modules.Dialogue.Action.DialogueBaseAction"), nil ,true)

---ActionInit
---@param cfg DialogueActionCfg
function DialogueAnimationStateClearAction:OnInit(cfg)
    self.super.OnInit(self, cfg)
    ---@type DynamicTarget 目标
    self.target = cfg.target
end

---ActionEnter
function DialogueAnimationStateClearAction:OnEnter()
    local actor = self.system:GetDynamicTarget(self.target)
    local x3Animator = GameObjectUtil.EnsureCSComponent(actor, typeof(CS.X3Game.X3Animator))
    if x3Animator then
        x3Animator:ClearStates()
    else
        Debug.Log("没有找到X3Animator")
    end
    if self.pipeline:GetRecoverDialogueMode() then
        self.system:ClearCachedAnim(actor)
    end
end

return DialogueAnimationStateClearAction