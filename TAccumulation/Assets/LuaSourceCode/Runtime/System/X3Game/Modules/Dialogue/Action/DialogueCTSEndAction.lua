---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/1/7 18:16
---

---CTS事件行为
---@class DialogueCTSEndAction:DialogueBaseAction
local DialogueCTSEndAction = class("DialogueCTSEndAction", require("Runtime.System.X3Game.Modules.Dialogue.Action.DialogueBaseAction"), nil, true)

---ActionInit
---@param cfg DialogueActionCfg
function DialogueCTSEndAction:OnInit(cfg)
    self.super.OnInit(self, cfg)
    ---@type boolean 收到CTS结束帧自动结束Dialogue
    self.endDialogueByCTSCpl = cfg.endDialogueByCTSCpl
    ---@type boolean 收到CTS结束帧截图
    self.captureTextureByCTSCpl = cfg.captureTextureByCTSCpl
end

---ActionEnter
function DialogueCTSEndAction:OnEnter()
    if self.endDialogueByCTSCpl then
        self.system:GetSettingData():SetEndDialogueByCTSCpl(true)
    end
    if self.captureTextureByCTSCpl then
        if self.pipeline:GetFastForwardMode() == false then
            self.system:GetSettingData():SetCaptureTextureByCTSCpl(true)
        end
    end
end

return DialogueCTSEndAction