---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/1/10 18:56
---

---Variable行为
---@class DialogueVariableChangeAction:DialogueBaseAction
local DialogueVariableChangeAction = class("DialogueVariableChangeAction", require("Runtime.System.X3Game.Modules.Dialogue.Action.DialogueBaseAction"), nil ,true)

---@class VariableChange
---@field variableId int
---@field variableValue int

---ActionInit
---@param cfg DialogueActionCfg
function DialogueVariableChangeAction:OnInit(cfg)
    self.super.OnInit(self, cfg)
    ---@type table<VariableChange> 变量修改
    self.variableChanges = cfg.variableChanges
end

---ActionEnter
function DialogueVariableChangeAction:OnEnter()
    if self.variableChanges then
        for _, variableChange in pairs(self.variableChanges) do
            self.system:ChangeVariableState(variableChange.variableId, variableChange.variableValue)
        end
    end
end

return DialogueVariableChangeAction