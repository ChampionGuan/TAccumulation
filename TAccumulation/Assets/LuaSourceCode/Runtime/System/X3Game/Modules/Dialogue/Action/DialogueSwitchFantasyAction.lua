---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/1/10 20:44
---

---场景Fantasy开关
---@class DialogueSwitchFantasyAction:DialogueBaseAction
local DialogueSwitchFantasyAction = class("DialogueSwitchFantasyAction", require("Runtime.System.X3Game.Modules.Dialogue.Action.DialogueBaseAction"), nil ,true)

---ActionInit
---@param cfg DialogueActionCfg
function DialogueSwitchFantasyAction:OnInit(cfg)
    self.super.OnInit(self, cfg)
    ---@type boolean 场景Fantasy开关
    self.switchFantasy = cfg.switchFantasy
end

---ActionEnter
function DialogueSwitchFantasyAction:OnEnter()
    local effectFantasy = nil
    if self.switchFantasy == 1 then
        ---暂时没有其他方法找到这个东西
        effectFantasy = CS.UnityEngine.GameObject.Find("effect_fantasy")
        if effectFantasy ~= nil then
            local sceneFantasy = effectFantasy:GetComponent("SceneFantasy")
            if sceneFantasy ~= nil then
                sceneFantasy.IsFantasy = false
            end
        end
    else
        if self.switchFantasy == 2 then
            ---暂时没有其他方法找到这个东西
            effectFantasy = CS.UnityEngine.GameObject.Find("effect_fantasy")
            if effectFantasy ~= nil then
                local sceneFantasy = effectFantasy:GetComponent("SceneFantasy")
                if sceneFantasy ~= nil then
                    sceneFantasy.IsFantasy = true
                end
            end
        end
    end
end

return DialogueSwitchFantasyAction