---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/2/24 15:24
---

---@class DialogueChangeCharacterLightAction : DialogueBaseAction
local DialogueChangeCharacterLightAction = class("DialogueChangeCharacterLightAction", require("Runtime.System.X3Game.Modules.Dialogue.Action.DialogueBaseAction"), nil ,true)

---ActionInit
---@param cfg
function DialogueChangeCharacterLightAction:OnInit(cfg)
    self.super.OnInit(self, cfg)
    ---@type string
    self.solutionName = cfg.solutionName
end

---ActionEnter
function DialogueChangeCharacterLightAction:OnEnter()
    local obj = Res.Load(self.solutionName, ResType.T_CharacterLighting, AutoReleaseMode.Scene)
    if obj then
        local provider = CS.PapeGames.Rendering.CharacterLightingProvider.Current
        if provider then
            provider:ChangeCharacterLight(obj)
        else
            Debug.LogWarning("没有找到CharacterLightingProvider, 灯光方案切换失败。")
        end
    end
end

return DialogueChangeCharacterLightAction