---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by dengzi.
--- DateTime: 2023/6/21 15:21
---

---@class DynamicCardMgr
local DynamicCardMgr = class("DynamicCardMgr")
---@type GameDataBridge
local GameDataBridge = require("Runtime.System.X3Game.Modules.GameDataBridge.GameDataBridge")
---@type DynamicCardBridgeData
local DynamicCardBridgeData = require("Runtime.System.X3Game.Modules.DynamicCard.DynamicCardBridgeData")

---@return DynamicCardBridgeData
function DynamicCardMgr._GetOrAddBridgeData()
    local bridgeData = GameDataBridge.GetCurBridgeData(GameDataBridge.BridgeType.DynamicCard)
    if not bridgeData then
        bridgeData = DynamicCardBridgeData.new()
        GameDataBridge.AddInBridge(GameDataBridge.BridgeType.DynamicCard, bridgeData)
    end
    return bridgeData
end

---初始化一个动卡控制器
---@param parentTransform UnityEngine.Transform
---@param owner UICtrl
---@return DynamicCardCtrl
function DynamicCardMgr.InitCtrl(parentTransform, owner)
    local bridgeData = DynamicCardMgr._GetOrAddBridgeData()
    if bridgeData then
        return bridgeData:GetOrAddCtrl(parentTransform, owner)
    end
    return nil
end

---@param id DynamicCardCtrl
function DynamicCardMgr.RemoveCtrl(id)
    local bridgeData = DynamicCardMgr._GetOrAddBridgeData()
    if bridgeData then
        return bridgeData:RemoveCtrl(id)
    end
end

---设置所有动效都播放完成的回调,回调只会执行一次
function DynamicCardMgr.SetAllMotionCompleteCb(callback)
    local bridgeData = DynamicCardMgr._GetOrAddBridgeData()
    if bridgeData then
        return bridgeData:SetAllMotionCompleteCb(callback)
    end
end

return DynamicCardMgr