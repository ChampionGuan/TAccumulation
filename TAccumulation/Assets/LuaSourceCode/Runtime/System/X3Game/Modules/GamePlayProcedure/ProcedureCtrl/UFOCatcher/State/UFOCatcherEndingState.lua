---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/7/27 18:07
---

local Base = require("Runtime.System.X3Game.Modules.GamePlayProcedure.ProcedureCtrl.GamePlayState")
---@class UFOCatcherEndingState : GamePlayState
local UFOCatcherEndingState = class("UFOCatcherEndingState", Base)

---状态进入
function UFOCatcherEndingState:OnEnter()
    EventMgr.Dispatch("UFOCATCHEREVENT_UFOCATCHERSTATE_ENTERENDING", nil)
    self.owner:CheckUFOCatcherDialogue(handler(self, self.CheckDialogueCallback))
end

---校验结束
function UFOCatcherEndingState:CheckDialogueCallback()
    self.owner:PlayEndingDialogue()
end

---切换状态
function UFOCatcherEndingState:GotoNextState()
    self.owner:ChangeState(UFOCatcherGameState.Finish)
end

function UFOCatcherEndingState:OnExit(nextState)
    EventMgr.Dispatch("UFOCATCHEREVENT_UFOCATCHERSTATE_QUITENDING", nil)
end

return UFOCatcherEndingState