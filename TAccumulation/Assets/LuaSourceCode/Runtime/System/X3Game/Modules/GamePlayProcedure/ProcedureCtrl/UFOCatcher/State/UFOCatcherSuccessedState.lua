---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by junjun003.
--- DateTime: 2022/7/27 18:07
---

local Base = require("Runtime.System.X3Game.Modules.GamePlayProcedure.ProcedureCtrl.GamePlayState")
---@class UFOCatcherSuccessedState:GamePlayState
local UFOCatcherSuccessedState = class("UFOCatcherSuccessedState", Base)

---状态进入
function UFOCatcherSuccessedState:OnEnter()
    EventMgr.Dispatch("UFOCATCHEREVENT_CLOSECHANGEPLAYER", nil)
    EventMgr.Dispatch("UFOCatcherPanel_Show")
    self.owner:ClearBetweenState()
    self.owner:CloseControlRig()
    self.owner.touchCtrl.canControl = false
    self.owner:CheckUFOCatcherDialogue(function()
        self.owner:SendResultToServer(handler(self, self.OnSendResultCallback))
    end)
end

---
function UFOCatcherSuccessedState:OnSendResultCallback()
    self.owner:CheckFirstGetDollDialogue()
end

---状态进入
function UFOCatcherSuccessedState:GotoNextState()
    self.owner:RemoveCutSceneDoll()
    self.owner:NextGame()
end

return UFOCatcherSuccessedState