---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by doudou.
--- DateTime: 2023/5/23 20:03
---@class CharacterInteractionMgr
local CharacterInteractionMgr = {}
local CtrlPath = "Runtime.System.X3Game.Modules.CharacterInteractionCtrl.CharacterInteractionCtrl"

---@type table<GameObject, CharacterInteractionCtrl>
local m_CtrlDict = {}

---启动自由互动
---@param character GameObject
---@param dialogueCtrlName string
---@param dialogueInfoId int
---@param endCallBack fun
function CharacterInteractionMgr.StartInteraction(character, dialogueCtrlName, dialogueInfoId, endCallBack)
    ---@type CharacterInteractionCtrl
    local ctrl = GameObjectCtrl.GetOrAddCtrl(character, CtrlPath)
    ctrl:InitData(dialogueCtrlName, dialogueInfoId, endCallBack)
    m_CtrlDict[character] = ctrl
    return ctrl
end

---@param character GameObject
function CharacterInteractionMgr.Remove(character)
    local ctrl = GameObjectCtrl.GetCtrl(character, CtrlPath)
    if ctrl then
        m_CtrlDict[character] = nil
        GameObjectCtrl.RemoveCtrl(character,CtrlPath)
    end
end

return CharacterInteractionMgr