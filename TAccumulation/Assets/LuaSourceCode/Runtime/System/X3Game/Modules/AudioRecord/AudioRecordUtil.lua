---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by aoliao.
--- DateTime: 2023/12/5 11:27
---AudioRecordUtil
---@class AudioRecordUtil
local AudioRecordUtil = {}
local CS_PFAUDIORECORDUTILITY = CS.X3Game.Platform.PFAudioRecordUtility
---@type AudioRecordConst
local AudioRecordConst = require("Runtime.System.X3Game.Modules.AudioRecord.AudioRecordConst")

---@public 是否是特殊设备，需要FallBack AEC（仅Android）
---@param isSpecialPhone bool
function AudioRecordUtil.InitAndroidDevice()
    if AudioRecordUtil.alreadyInit then
        return
    end
    local platform = Application.GetPlatform()
    if platform ~= CS.UnityEngine.RuntimePlatform.Android then
        return
    end
    local mobileBrand = SDKMgr.GetDeviceInfo().MobileBrand
    local systemHardware = SDKMgr.GetDeviceInfo().SystemHardware
    local isSpecialDevice = false
    if not (string.isnilorempty(mobileBrand) and string.isnilorempty(systemHardware)) then
        if AudioRecordConst.SpecialDevices[mobileBrand] and AudioRecordConst.SpecialDevices[mobileBrand][systemHardware] then
            isSpecialDevice = true
        end
    end
    AudioRecordUtil.SetIsSpecialDevice(isSpecialDevice)
end

---@public 是否是特殊手机，需要FallBack AEC（仅Android）
---@param isSpecialPhone bool
function AudioRecordUtil.SetIsSpecialDevice(isSpecialDevice)
    CS_PFAUDIORECORDUTILITY.IsSpecialPhone = isSpecialDevice
    AudioRecordUtil.alreadyInit = true
end

return AudioRecordUtil