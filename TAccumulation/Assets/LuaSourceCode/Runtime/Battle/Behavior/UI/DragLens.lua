---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by canglan.
--- DateTime: 2021/11/18 11:04
---

local UIBehaviorBase = require("Runtime.Battle.Behavior.UI.UIBehaviorBase")

---@class DragLens:UIBehaviorBase
local DragLens = XECS.class("DragLens", UIBehaviorBase)
DragLens.Type = BattleUIBehaviorType.DragLens

function DragLens:ctor()
    UIBehaviorBase.ctor(self)
    self._requiredUpdate = false
end

function DragLens:Awake()
    UIBehaviorBase.Awake(self)
    self._transformName = "OCX_DragBg"
    self._transform = self:GetComponent(self._transformName, "Transform")

    self:Register()
end

function DragLens:Register()
    self:AddDragListener(self._transform, g_BattleClient:SafeHandler(self, self._OnDrag), g_BattleClient:SafeHandler(self, self._OnDown), g_BattleClient:SafeHandler(self, self._OnEndDrag))
end

function DragLens:_OnDown(_,x,y)
    self._battleUI.cameraTrace:Down()
end

function DragLens:_OnDrag(_,x,y)
    self._battleUI.cameraTrace:Rotate(x, y, true)
end

function DragLens:_OnEndDrag(_,x,y)
    self._battleUI.cameraTrace:Rotate(x, y, false)
    self._battleUI.cameraTrace:Up()
end

function DragLens:Unregister()
 
end

function DragLens:OnDestroy()
    self:Unregister()
    UIBehaviorBase.OnDestroy(self)
end

return DragLens