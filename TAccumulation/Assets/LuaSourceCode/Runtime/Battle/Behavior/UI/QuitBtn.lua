---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by canglan.
--- DateTime: 2021/11/18 11:04
---

local UIBehaviorBase = require("Runtime.Battle.Behavior.UI.UIBehaviorBase")

---@class QuitBtn:UIBehaviorBase
local QuitBtn = XECS.class("QuitBtn", UIBehaviorBase)
QuitBtn.Type = BattleUIBehaviorType.QuitBtn

function QuitBtn:ctor()
    UIBehaviorBase.ctor(self)
    self._requiredUpdate = false
end

function QuitBtn:Awake()
    UIBehaviorBase.Awake(self)
    self._transformName = "OCX_Btn_Quit"
    self._transform = self:GetComponent(self._transformName, "Transform")
    self:Register()
end

function QuitBtn:Start()
    UIBehaviorBase.Start(self)
    self:SetGoActive(not g_BattleClient:IsPrologueChapter())
end

function QuitBtn:Register()
    self:AddButtonListener(self._transform, g_BattleClient:SafeHandler(self, self._Quit))
end

---退出游戏
function QuitBtn:_Quit()
    if self._battleUI.csBattle.sequencePlayer.isPlayingPerform then
        return
    end
    CS.X3Battle.BattleResMgr.isDynamicBottomLoadErring = false
    UIMgr.Open("BattleSettingWnd")
    CS.X3Battle.BattleResMgr.isDynamicBottomLoadErring = true
end

function QuitBtn:Unregister()

end

function QuitBtn:OnDestroy()
    self:Unregister()
    UIBehaviorBase.OnDestroy(self)
end

return QuitBtn
