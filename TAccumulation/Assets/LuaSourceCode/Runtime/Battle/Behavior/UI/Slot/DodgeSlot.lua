---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by canglan.
--- DateTime: 2021/11/18 11:04
---

local SlotBase = require("Runtime.Battle.Behavior.UI.Slot.SlotBase")

---@class DodgeSlot:SlotBase
local DodgeSlot = XECS.class("DodgeSlot", SlotBase)
DodgeSlot.Type = BattleSlotBehaviorType.DodgeSlot

local PlayerBtnType = CS.X3Battle.PlayerBtnType

function DodgeSlot:ctor()
    SlotBase.ctor(self)
    self._curFrame = 5

    self._cdIndex = 0
    self._disableIndex = 1
    self._activeIndex = 2

    self._showNormalMessage = false
    self._finalConditionMessage = 20015
    self._afterConditionMessage = 20007
end

function DodgeSlot:Awake()
    SlotBase.Awake(self)
    self._transform = self:GetComponent("OCX_DashSkill", "Transform")
    self._headImgTrans = self:GetComponent("OCX_Dash_img_head", "Transform")

    self._effect = self:GetComponent("OCX_Dash_fx_ui_battle_click", "ParticleSystem")
    self._emergeEffect = self:GetComponent("OCX_Dash_fx_ui_battle_emerge", "ParticleSystem")
    self._cdImgTrans = self:GetComponent("OCX_Dash_img_mask", "Transform")
    self._cdText = self:GetComponent("OCX_Dash_text_cd", "TextMeshProUGUI")
    self:SetActive("OCX_QTE_Dash_fx_ui_battle_loop", false)
    self._styleEnum = self._transform:GetComponent("StyleEnum")

    self._gridBgTrans = self:GetComponent("OCX_Dash_number", "Transform")
    self._gridTrans = self:GetComponent("OCX_Dash_segment","Transform")
    self:SetActive(self._gridTrans,true)
    self:SetNodeVisible(self._gridTrans,false)
    self._cdGridTrans = self:GetComponent("OCX_Dash_prgs", "Transform")
    self:SetActive(self._gridBgTrans, true)

    self._btnType = PlayerBtnType.Dodge
    self:Register()
end

---@param state Int
function DodgeSlot:TryPlaySkill(state)
    if not self._slot then
        return
    end
    SlotBase.TryPlaySkill(self, state, false, self._slot.castCount == 0 and self._slot.maxCastCount > 0)
end


function DodgeSlot:OnDestroy()
    SlotBase.OnDestroy(self)
end

return DodgeSlot