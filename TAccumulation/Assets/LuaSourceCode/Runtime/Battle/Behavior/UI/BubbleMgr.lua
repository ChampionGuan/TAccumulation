---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by canglan.
--- DateTime: 2021/11/18 11:04
---

local Behavior = require("Runtime.Battle.Common.Behavior")
local FemaleBubble = require("Runtime.Battle.Behavior.UI.Bubble.FemaleBubble")
local MaleBubble = require("Runtime.Battle.Behavior.UI.Bubble.MaleBubble")
local BossBubble = require("Runtime.Battle.Behavior.UI.Bubble.BossBubble")
local TextBubble = require("Runtime.Battle.Behavior.UI.Bubble.TextBubble")

---@class BubbleMgr:Behavior
local BubbleMgr = XECS.class("BubbleMgr", Behavior)
BubbleMgr.Type = BattleUIBehaviorType.BubbleMgr

function BubbleMgr:ctor()
    Behavior.ctor(self)
    ---@type BattleUI
    self.battleUI = nil
    ---@type FemaleBubble
    self._femaleBubble = nil
    ---@type MaleBubble
    self._maleBubble = nil
    ---@type BossBubble
    self._bossBubble = nil
    ---@type TextBubble
    self._textBubble = nil
end

---获得血量归一化数值
function BubbleMgr:Awake()
    self.battleUI = self.owner
    self._femaleBubble = self:AddBehavior(FemaleBubble.new())
    self._maleBubble = self:AddBehavior(MaleBubble.new())
    self._bossBubble = self:AddBehavior(BossBubble.new())
    self._textBubble = self:AddBehavior(TextBubble.new())

    BubbleMgr.super.Awake(self)
end

---@param active bool
function BubbleMgr:SetAimFlag(active)
    self._femaleBubble:SetAimFlag(active)
    self._maleBubble:SetAimFlag(active)
    self._bossBubble:SetAimFlag(active)
end

---@param active bool
function BubbleMgr:SetCacheAimFlag(active)
    self._femaleBubble:SetCacheAimFlag(active)
    self._maleBubble:SetCacheAimFlag(active)
    self._bossBubble:SetCacheAimFlag(active)
end

---@param active bool
function BubbleMgr:SetGoActive(active)
    self._femaleBubble:SetGoActive(active)
    self._maleBubble:SetGoActive(active)
    self._bossBubble:SetGoActive(active)
end

function BubbleMgr:ActorChange(actor, state)
    self._bossBubble:ActorChange(actor, state)
end

function BubbleMgr:OnDestroy()
    self.battleUI = nil
    self._femaleBubble = nil
    self._maleBubble = nil
    self._bossBubble = nil
    self._textBubble = nil
    Behavior.OnDestroy(self)
end

return BubbleMgr