---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by jiaozhu.
--- DateTime: 2021/12/25 17:20
---

---@class JsonUtil
JsonUtil = {}

---Xlua内置json解析工具
local Rapidjson = require("rapidjson",true,true)

---注意：
---table hash类型的必须保证key是字符串 eg: local t = {a = 1,b=2}
---table 数组类型 eg:local t = {1,2,3,"aa"}
--- lua table to json
---@param lua_table table
---@return string
function JsonUtil.Encode(lua_table)
    return lua_table and Rapidjson.encode(lua_table) or ''
end

---json to lua table
---@param json_str string
---@return table
function JsonUtil.Decode(json_str)
    return json_str and Rapidjson.decode(json_str) or nil
end

---压缩字符串
---@param t table
---@return string
function JsonUtil.Compress(t)
    return table.isnilorempty(t) and "" or Rapidjson.compress(t)
end

---解压字符串
---@param str string
---@return table
function JsonUtil.Decompress(str)
    return string.isnilorempty(str) and {} or Rapidjson.decompress(str)
end
return JsonUtil